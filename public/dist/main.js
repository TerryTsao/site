"use strict";var _jquery=_interopRequireDefault(require("jquery")),_darkreader=_interopRequireDefault(require("darkreader")),_user=_interopRequireDefault(require("../user.config"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var passwd,isHome=!1,isPC=!1,isMB=!1,isZoom=!1,isCard=!1,cent="",topBtn="",CARDPAGES=["idea","diary","joker","gtd","story","wiki","web-developer-roadmap"];["/public/index.html","/public/index","/public/","/index.html","/index","/"].includes(location.pathname)&&(isHome=!0),isCurPage("joker")&&(sessionStorage.getItem("pw")?console.log("Welcome, Sir."):"just go out"===(passwd=prompt("Sorry, you have no permissionsÔºÅ"))?(console.log("Welcome, Sir."),sessionStorage.setItem("pw",!0)):window.location.pathname="/"),"PC"==browserRedirect()?isPC=!0:isMB=!0,(0,_jquery.default)(document).ready(function(){var e,t=(0,_jquery.default)("#table-of-contents"),a=(0,_jquery.default)("body"),u=(0,_jquery.default)(".title"),i=(0,_jquery.default)("#content");if(a.addClass("animated fadeIn slow"),u.click(toggleColor),createNavButton(),topBtn=createTopButton(),(0,_jquery.default)(window).scroll(scrollToTop),a.on("touchstart",touchStart),a.on("touchend",touchEnd),t&&t.click(hideDir),isPC&&t&&(e=-parseInt(t.width()/(0,_jquery.default)(document).width()*100)+"%",t.css("left",e),t.mouseenter(function(){return t.css("left",0)}),t.mouseleave(function(){return t.css("left",e)})),isHome&&(i.addClass("js-home-content"),t&&t.css("display","none"),(0,_jquery.default)(".top-btn").css("display","none"),(0,_jquery.default)(".nav-btn").css("display","none"),(0,_jquery.default)("thead").each(function(){isPC?(0,_jquery.default)(this).parent().hover(function(){(0,_jquery.default)(this).find("tbody").fadeToggle()}):(0,_jquery.default)(this).parent().click(function(){(0,_jquery.default)(this).find("tbody").fadeToggle()});var e=(0,_jquery.default)(this).parent().find("td").length,t=(0,_jquery.default)(this).find("th").text();(0,_jquery.default)(this).find("th").html("".concat(t,' <span style="font-size: 12px; color: #ace; float: right;">(').concat(e,")</span>"))}),(0,_jquery.default)("#wechat").hide(),(0,_jquery.default)(".wechat").hover(function(){(0,_jquery.default)("#wechat").fadeToggle()})),(0,_jquery.default)("note").each(function(){(0,_jquery.default)(this).addClass("js-note")}),(0,_jquery.default)("essay").each(function(){(0,_jquery.default)(this).addClass("js-essay")}),(0,_jquery.default)(".me .contact #weibo").attr("href","//weibo.com/u/"+_user.default.weibo),(0,_jquery.default)(".me #wechat img").attr("src","/images/"+_user.default.wechat),(0,_jquery.default)(".me .contact #email").attr("href","mailto:"+_user.default.email),(0,_jquery.default)(".me .contact #github").attr("href",(_user.default.gitee||"//github.com/")+_user.default.github),(0,_jquery.default)(".me .contact #bilibili").attr("href","//space.bilibili.com/"+_user.default.bilibili),(0,_jquery.default)(".validation").html('<a href="http://beian.miit.gov.cn" target="_blank">'+_user.default.icp+"</a>"),(0,_jquery.default)(".timestamp-wrapper").parent().addClass("gtd-timestamp"),(0,_jquery.default)("#postamble .date")[1].innerText="Updated: "+(0,_jquery.default)("#postamble .date")[1].innerText.substring(8),(0,_jquery.default)("#postamble .author")[0].innerText="Author: "+_user.default.author,document.addEventListener&&document.addEventListener("DOMMouseScroll",scrollFunc,!1),window.addEventListener("mousewheel",scrollFunc),document.addEventListener("mousewheel",scrollFunc),isPC&&(0,_jquery.default)(document).click(function(e){var t=120;a.append("<div class='water-animate'>"),(0,_jquery.default)(".water-animate").css({position:"fixed",left:e.clientX,top:e.clientY,borderRadius:t+"px",border:"2px solid #19f","z-index":-1}).stop().animate({width:t,height:t,left:e.clientX-60,top:e.clientY-60,opacity:"0"},"slow",function(){return(0,_jquery.default)("body .water-animate").remove()})}),isMB&&((0,_jquery.default)("#postamble").css("display","none"),(0,_jquery.default)("body").append('<a class="js-footer-slogan" href="http://beian.miit.gov.cn/" target="_blank">'+_user.default.icp+"</a>"),(0,_jquery.default)(".me #wechat img").width("40%")),(0,_jquery.default)(".src").each(function(){var e=(0,_jquery.default)(this)[0].className.split(" src-")[1];(0,_jquery.default)('<span class="js-code-src">'+e+"</span>").prependTo((0,_jquery.default)(this))}),(0,_jquery.default)("pre").each(function(){(0,_jquery.default)(this).dblclick(function(){var e=(0,_jquery.default)(this);e.addClass("js-pre-dblclick"),setTimeout(function(){e.removeClass("js-pre-dblclick")},1e4)})}),(0,_jquery.default)("img").each(function(e,t){(0,_jquery.default)(this).click(function(){isZoom||((0,_jquery.default)("html").append("\n                    <div class='img-wrapper animated pulse faster'>\n                        <img class='img-zoom' src=".concat(t.src," />\n                    </div>\n                    ")),(0,_jquery.default)(".img-wrapper").click(function(){(0,_jquery.default)(".img-wrapper").remove(),isZoom=!1}),isZoom=!0)})}),(isCurPage(CARDPAGES)||isCard)&&((0,_jquery.default)(".outline-2").each(function(){(0,_jquery.default)(this).addClass("js-outline-2")}),(0,_jquery.default)(".outline-3").each(function(){(0,_jquery.default)(this).addClass("js-outline-3")})),isCurPage("nav")){a.addClass("js-nav-body"),(0,_jquery.default)('<div class="js-nav-link-container"></div>').insertAfter(u),(0,_jquery.default)("td a").each(function(e,t){(0,_jquery.default)(this).attr("target","_blank"),(0,_jquery.default)(".js-nav-link-container").append(t)}),(0,_jquery.default)(".org-ul a").each(function(){(0,_jquery.default)(this).attr("target","_blank")});var n=0;0==(n=(0,_jquery.default)(".js-nav-link-container a").length%5)&&(n=5);for(var r=0;r<5-n;r++)(0,_jquery.default)(".js-nav-link-container").append("<a></a>");(0,_jquery.default)("#content p").addClass("js-nav-bookmarks");i=(0,_jquery.default)("li").length-1,u="",u=20<i?"Ôºàüî•Â§™Â§ö‰∫ÜÔºåËµ∂Âø´Â§ÑÁêÜÂêßÔºå‰∫≤ÔºÅÔºâ":"Ôºàüò§Áä∂ÊÄÅËøò‰∏çÈîôÔºÅÔºâ";(0,_jquery.default)("#content p").append('<span style="float: right;"><progress value="'.concat(i,'" max="100"></progress> ').concat(u).concat(i," Êù°</span>")),(0,_jquery.default)(".org-ul").addClass("js-nav-bookmarks-container")}});var isDark="false";function toggleColor(){"false"===isDark?(_darkreader.default.enable({brightness:100,contrast:90,sepia:10}),isDark="true",localStorage.setItem("isDark",isDark)):(_darkreader.default.disable(),isDark="false",localStorage.setItem("isDark",isDark),location.reload())}function browserRedirect(){var e=navigator.userAgent.toLowerCase(),t="ipad"==e.match(/ipad/i),a="iphone os"==e.match(/iphone os/i),u="midp"==e.match(/midp/i),i="rv:1.2.3.4"==e.match(/rv:1.2.3.4/i),n="ucweb"==e.match(/ucweb/i),r="android"==e.match(/android/i),o="windows ce"==e.match(/windows ce/i),e="windows mobile"==e.match(/windows mobile/i);return t||a||u||i||n||r||o||e?"MB":"PC"}function hideDir(){var e;isMB&&(e=document.getElementById("table-of-contents"),1==getComputedStyle(e).opacity?(e.style.top="-380px",e.style.opacity=0):(e.style.top="0px",e.style.opacity=1))}function scrollToTop(){var e=(0,_jquery.default)(document).height(),t=(0,_jquery.default)(window).height(),a=(0,_jquery.default)(document).scrollTop(),t=parseInt(a/(e-t)*100);cent=(t=(""+t).length<2?"0"+t:t)+"% ‚Üë",topBtn.innerHTML=cent}function createTopButton(){var e=document.createElement("div");return e.innerHTML="TOP ‚Üë",e.setAttribute("class","top-btn"),e.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})}),document.body.appendChild(e),e}function createNavButton(){(0,_jquery.default)("<div></div>").text("IDX ‚Üê").addClass("nav-btn").appendTo("body").click(function(){location.href="./index.html"})}function scrollFunc(e){(e=e||window.event).wheelDelta?(0<e.wheelDelta&&(_showNav(),setTimeout(function(){_hideNav()},1e3)),e.wheelDelta<0&&(_showNav(),setTimeout(function(){_hideNav()},1e3))):e.detail&&(0<e.detail&&(_showNav(),setTimeout(function(){_hideNav()},1e3)),e.detail<0&&(_showNav(),setTimeout(function(){_hideNav()},1e3)))}"true"==localStorage.getItem("isDark")&&toggleColor();var startY=0;function touchStart(e){e=e.touches[0].pageY;startY=e}function touchEnd(e){e.changedTouches[0].pageY;_showNav(),setTimeout(function(){_hideNav()},1e3)}function _showNav(){isMB?((0,_jquery.default)(".top-btn").css("opacity","0.9"),(0,_jquery.default)(".nav-btn").css("opacity","0.9")):((0,_jquery.default)(".top-btn").addClass("nav-show-hide"),(0,_jquery.default)(".nav-btn").addClass("nav-show-hide"))}function _hideNav(){isMB?((0,_jquery.default)(".top-btn").css("opacity","0.1"),(0,_jquery.default)(".nav-btn").css("opacity","0.1")):((0,_jquery.default)(".top-btn").removeClass("nav-show-hide"),(0,_jquery.default)(".nav-btn").removeClass("nav-show-hide"))}function isCurPage(e){if("string"==typeof e){if(["/public/"+e+".html","/public/"+e,"/"+e+".html","/"+e].includes(location.pathname))return!0}else if(e instanceof Array){var t=0;if(e.map(function(e){["/public/"+e+".html","/public"+e,"/"+e+".html","/"+e].includes(location.pathname)&&(t+=1)}),0<t)return!0}}(0,_jquery.default)(document).ready(function(){(0,_jquery.default)("#text-table-of-contents a").each(function(){var e=(0,_jquery.default)(this).attr("href").split("#")[1];(0,_jquery.default)(this).addClass("links "+e)}),_jquery.default.each([2,3,4,5,6],function(e,t){(0,_jquery.default)(".outline-"+t)&&(0,_jquery.default)(".outline-"+t).each(function(){(0,_jquery.default)(this).addClass("outline")})})}),(0,_jquery.default)(window).scroll(function(){var a,e=(0,_jquery.default)(".outline"),u=(0,_jquery.default)(this).scrollTop(),i=[];e.each(function(){var e,t=(0,_jquery.default)(this).offset().top;i.push(t),t-1<u&&(a=(0,_jquery.default)(this)),u>=i[0]&&(e=(t=(e=a.attr("id")).split("-"))[t.length-1],(0,_jquery.default)(".links").removeClass("js-link-active"),(0,_jquery.default)("."+e).addClass("js-link-active"))})});