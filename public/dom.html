<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2020-12-04 Fri 10:16 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>DOM</title>
<meta name="generator" content="Org mode">
<meta name="author" content="Jack Liu">
<link rel="shortcut icon" href="/images/rose-red.png" type="image/x-icon" />
<link rel="stylesheet" href="/css/animate.min.css" />
<link rel="stylesheet" href="/css/all.min.css" />
<link rel="stylesheet" type="text/css" href="/css/style.css" />
<script src="/js/jquery.min.js"></script>
<script src="/js/darkreader.js"></script>
<script src="/user.config.js"></script>
<script src="/js/main.js"></script>
</head>
<body>
<div id="content">
<h1 class="title">DOM</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org6aefb60">节点层次</a></li>
<li><a href="#org444fe35">1. Node 类型</a>
<ul>
<li><a href="#org3963f6c">nodeName 和 nodeValue 属性</a></li>
<li><a href="#orgb247d78">节点关系</a></li>
</ul>
</li>
</ul>
</div>
</div>
<pre class="example">
本章内容：
- 理解包含不同层次节点的 DOM
- 使用不同的节点类型
- 克服浏览器兼容性问题及各种陷阱
</pre>

<p>
<span class="underline">DOM（文档对象模型）</span> 是针对 HTML 和 XML 文档的一个 API（应用程序编程接口），它描述了一个层次化的节点树，允许开发人员添加、移除和修改页面的某一部分。
</p>

<note>
IE 中所有的 DOM 对象都是以 COM 对象的形式实现的，这意味着 IE 中的 DOM 对象与原生 JavaScript 对象的行为或活动特点并不一致。
</note>

<div id="outline-container-org6aefb60" class="outline-2">
<h2 id="org6aefb60">节点层次</h2>
<div class="outline-text-2" id="text-org6aefb60">
<p>
DOM 可以将任何 HTML 或 XML 文档描绘成一个由多层节点构成的结构：
</p>
<ul class="org-ul">
<li>节点分为几种不同的类型，每种类型分别表示文档中不同的信息及（或）标记；</li>
<li>每个节点都拥有各自的特点、数据和方法，另外也与其他节点存在某种关系；</li>
<li>节点之间的关系构成了层次，而所有页面标记则表现为 <b>一个以特定节点为根节点的树形结构</b> 。</li>
</ul>

<p>
以下面的 HTMl 为例：
</p>

<div class="org-src-container">
<pre class="src src-html"><span class="linenr">1: </span>&lt;<span style="color: #A6E22E;">html</span>&gt;
<span class="linenr">2: </span>  &lt;<span style="color: #A6E22E;">head</span>&gt;
<span class="linenr">3: </span>    &lt;<span style="color: #A6E22E;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">Sample Page</span>&lt;/<span style="color: #A6E22E;">title</span>&gt;
<span class="linenr">4: </span>  &lt;/<span style="color: #A6E22E;">head</span>&gt;
<span class="linenr">5: </span>  &lt;<span style="color: #A6E22E;">body</span>&gt;
<span class="linenr">6: </span>    &lt;<span style="color: #A6E22E;">p</span>&gt;Hello World!&lt;/<span style="color: #A6E22E;">p</span>&gt;
<span class="linenr">7: </span>  &lt;/<span style="color: #A6E22E;">body</span>&gt;
<span class="linenr">8: </span>&lt;/<span style="color: #A6E22E;">html</span>&gt;
</pre>
</div>

<p>
将这个简单的 HTML 文档表示为一个层次结构，如右下图：
</p>

<img
src="/images/dom-1.png"
width="400"
height=""
style="float: right; margin-left: 8px;"
title=""
/>

<p>
<b>文档节点是每个文档的根节点。</b>
</p>

<p>
本例中，文档节点只有一个子节点，即 <code>&lt;html&gt;</code> 元素，称之为 <span class="underline">文档元素</span> 。
</p>
<ul class="org-ul">
<li><b>文档元素是文档的最外层元素</b> ，文档中的其他所有元素都包含在文档元素中；</li>
<li><b>每个文档只能有一个文档元素</b> 。</li>
</ul>

<p>
在 HTML 页面中，文档元素始终都是 <code>&lt;html&gt;</code> 元素；在 XML 中，没有预定义的元素，因些任何元素都可能成为文档元素。
</p>

<p>
<b>每一段标记都可以通过树中的一个节点来表示</b> ，总共有 12 种节点类型，这些节点类型都继承处一个基类型。
</p>

<essay>
让我们来逐个认识一下这 12 种节点类型吧！
</essay>
</div>
</div>

<div id="outline-container-org444fe35" class="outline-2">
<h2 id="org444fe35">1. Node 类型</h2>
<div class="outline-text-2" id="text-org444fe35">
<p>
DOM1 级定义了一个 Node 接口，该接口将 <b>由 DOM 中的所有节点类型实现</b> 。
</p>

<p>
这个 Node 接口在 JavaScript 中是作为 Node 类型实现的，JavaScript 中的所有节点类型都继承自 Node 类型，因此所有节点类型都共享着相同的基本属性和方法。
</p>

<blockquote>
<p>
除了 IE 之外，在其他所有浏览器都可以访问到这个类型。
</p>
</blockquote>

<p>
每个节点都有一个 <code>nodeType</code> 属性，用于表明节点的类型。
</p>

<p>
节点类型由在 Node 类型中定义的下列 12 个数值常量来表示 ，任何节点类型必居其一：
</p>

<pre class="example">
- Node.ELEMENT_NODE(1)
- Node.ATTRIBUTE_NODE(2)
- Node.TEXT_NODE(3)
- Node.CDATA_SECTION_NODE(4)
- Node.ENTITY_REFERENCE_NODE(5)
- Node.ENTITY_NODE(6)
- Node.PROCESSING_INSTRUCTION_NODE(7)
- Node.COMMENT_NODE(8)
- Node.DOCUMENT_NODE(9)
- Node.DOCUMENT_TYPE_NODE(10)
- Node.DOCUMENT_FRAGMENT_NODE(11)
- Node.NOTATION_NODE(12)
</pre>

<p>
\*注：并不是所有节点类型都受到 Web 浏览器的支持，开发人员最常用的就是 <b>元素和文本节点</b> 。
</p>

<p>
通过比较上面这些常量，可以很容易地确定节点的类型，如：
</p>

<div class="org-src-container">
<pre class="src src-js"><span class="linenr">1: </span><span style="color: #75715E;">// </span><span style="color: #75715E;">if (someNode.nodeType == Node.ELEMENT_NODE) {  // &#22312; IE &#20013;&#26080;&#25928;&#65288;IE &#27809;&#26377;&#20844;&#24320; Node &#31867;&#22411;&#30340;&#26500;&#36896;&#20989;&#25968;&#65289;</span>
<span class="linenr">2: </span><span style="color: #F92672;">if</span> <span style="color: #AE81FF;">(</span>someNode.nodeType == 1<span style="color: #AE81FF;">)</span> <span style="color: #AE81FF;">{</span>                     <span style="color: #75715E;">// </span><span style="color: #75715E;">&#20860;&#23481; IE &#65292;&#36866;&#29992;&#20110;&#25152;&#26377;&#27983;&#35272;&#22120;</span>
<span class="linenr">3: </span>    alert<span style="color: #66D9EF;">(</span><span style="color: #E6DB74;">'Node is an element.'</span><span style="color: #66D9EF;">)</span>;
<span class="linenr">4: </span><span style="color: #AE81FF;">}</span>
</pre>
</div>
</div>

<div id="outline-container-org3963f6c" class="outline-3">
<h3 id="org3963f6c">nodeName 和 nodeValue 属性</h3>
<div class="outline-text-3" id="text-org3963f6c">
<p>
要了解节点的具体信息，可以使用 <code>nodeName</code> 和 <code>nodeValue</code> 这两个属性，这两个属性的值完全取决于节点的类型。
</p>

<p>
*注：在使用这两个值以前，最好是先检测一下节点的类型。
</p>

<div class="org-src-container">
<pre class="src src-js"><span class="linenr">1: </span><span style="color: #F92672;">if</span> <span style="color: #AE81FF;">(</span>someNode.nodeType == 1<span style="color: #AE81FF;">)</span> <span style="color: #AE81FF;">{</span>
<span class="linenr">2: </span>    value = someNode.nodeName;  <span style="color: #75715E;">// </span><span style="color: #75715E;">nodeName &#30340;&#20540;&#26159;&#20803;&#32032;&#30340;&#26631;&#31614;&#21517;</span>
<span class="linenr">3: </span><span style="color: #AE81FF;">}</span>
</pre>
</div>

<p>
对于元素节点， <code>nodeName</code> 中保存的始终都是元素的标签名，而 <code>nodeValue</code> 的值则始终为 <code>null</code> 。
</p>
</div>
</div>

<div id="outline-container-orgb247d78" class="outline-3">
<h3 id="orgb247d78">节点关系</h3>
<div class="outline-text-3" id="text-orgb247d78">
<p>
文档中所有的节点之间都存在这样或那样的关系。节点间的各种关系可以用传统的家庭关系来描述，相当于把文档树比喻成家谱。
</p>

<p>
每个节点都有一个 <code>childNodes</code> 属性，其中保存着一个 <code>NodeList</code> 对象。
</p>

<p>
<code>NodeList</code> 是一种类数组对象，用于保存一组有序的节点，可以通过位置来访问这些节点。
</p>

<blockquote>
<p>
什么是类数组对象？
</p>

<p>
请注意，我们虽然可以通过方括号语法来访问 <code>NodeList</code> 的值，而且这个对象也有 <code>length</code> 属性，但它并不是 Array 的实例。
</p>
</blockquote>

<p>
<code>NodeList</code> 对象的独特之处在于，它实际上是基于 DOM 结构 <b>动态执行查询的结果</b> ，因此 DOM 结构的变化能够自动反映在 <code>NodeList</code> 对象中。
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2020-12-01 Tue 22:16</p>
<p class="author">Author: Jack Liu</p>
<p class="date">Created: 2020-12-04 Fri 10:16</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
